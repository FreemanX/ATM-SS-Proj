<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript">
		var url = window.location.protocol + "//" + window.location.host + "/~group05/";
		function search() {
			var pattern = document.getElementById("pattern").value;
			var passwd = document.getElementById("passwdField").value;
			var req = new XMLHttpRequest();
			console.log(pattern);

			req.onreadystatechange = function() {
				var resultBox = document.getElementById("resultBox");
				resultBox.innerHTML = req.responseText;
				document.getElementById("countEle").innerHTML = " Log entities: <font color='red'>" + (req.responseText.split("<br>").length - 1) + "</font>";
			}

			req.open("GET", url + "viewLog.php?passwd=" + passwd + "&pattern=" + pattern, true);
			req.send();
		}
		function popHelp() {
			document.getElementById("help").style.opacity = "1";
		}
	</script>
</head>
<body>
	<h1>Log viewer</h1>
	<span id="countEle"></span><br>
	Passwd: <input type="password" id="passwdField"> Pattern: /<input type="text" onkeydown="search()" id="pattern">/ <span style="text-decoration: none; cursor: pointer; color: red;" onclick="popHelp()">?help</span> <span style="opacity: 0;" id="help">Pattern could be 1.<b><i>&lt;<a target="_blank" href="http://www.tutorialspoint.com/php/php_regular_expression.htm">php regex pattern</a>&gt;</i></b> , or 2.<b><i>"?clear"</i></b> - to clear log. E.g. <b><i>".*"</i></b> - to display all log</span><br><hr>
	<div id="resultBox">
	</div>
</body>
</html>